(function(root,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{root.DocsifyImageSize=factory()}})(typeof self!=="undefined"?self:this,function(){"use strict";function applySize(img,sizePart){if(!sizePart)return;img.removeAttribute("width");img.removeAttribute("height");if(sizePart.indexOf("%")!==-1){var pm=sizePart.match(/^(\d+(?:\.\d+)?)\s*%$/);if(pm){img.style.width=pm[1]+"%";img.style.height="auto"}return}if(/^\d+$/.test(sizePart)){var wOnly=parseInt(sizePart,10);if(!isNaN(wOnly)){img.style.width=wOnly+"px";img.style.height="auto"}return}var parts=sizePart.split(/x/i);if(parts.length>=1){var rawW=(parts[0]||"").trim();var rawH=(parts[1]||"").trim();var w=rawW?parseInt(rawW,10):NaN;var h=rawH?parseInt(rawH,10):NaN;var hasW=!isNaN(w);var hasH=!isNaN(h);if(hasW&&!hasH){img.style.width=w+"px";img.style.height="auto";return}if(!hasW&&hasH){img.style.height=h+"px";img.style.width="auto";return}if(hasW&&hasH){img.style.width=w+"px";img.style.height=h+"px";return}}}function applyAlign(img,alignPart){if(!alignPart)return;var a=String(alignPart).toLowerCase();img.style.display="";img.style.marginLeft="";img.style.marginRight="";if(a==="center"||a==="middle"){img.style.display="block";img.style.marginLeft="auto";img.style.marginRight="auto";return}if(a==="right"){img.style.display="block";img.style.marginLeft="auto";img.style.marginRight="0";return}if(a==="left"){img.style.display="block";img.style.marginLeft="0";img.style.marginRight="auto";return}}function imageSizePlugin(hook,vm){hook.doneEach(function(){var container=document.querySelector(".markdown-section");if(!container)return;var imgs=container.querySelectorAll("img[title]");Array.prototype.forEach.call(imgs,function(img){var title=img.getAttribute("title")||"";var sizeMatch=title.match(/:size=([^\s]+)/);var alignMatch=title.match(/:align=([^\s]+)/);var sizePart=sizeMatch?sizeMatch[1].trim():null;var alignPart=alignMatch?alignMatch[1].trim():null;if(!sizePart&&!alignPart){return}var cleanTitle=title.replace(/:size=[^\s]+/g,"").replace(/:align=[^\s]+/g,"").replace(/\s+/g," ").trim();if(cleanTitle){img.setAttribute("title",cleanTitle)}else{img.removeAttribute("title")}if(sizePart){applySize(img,sizePart)}if(alignPart){applyAlign(img,alignPart)}})})}if(typeof window!=="undefined"){window.$docsify=window.$docsify||{};window.$docsify.plugins=(window.$docsify.plugins||[]).concat(imageSizePlugin)}return imageSizePlugin});